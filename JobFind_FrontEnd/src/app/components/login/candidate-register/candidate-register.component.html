<app-nav-menu></app-nav-menu>

<div class="candidate-page">
  <div class="left-section">
    <!-- Conteúdo opcional à esquerda -->
  </div>

  <div class="right-section">
    <div class="card shadow-sm">
      <div class="card-header">
        <h4 class="card-title text-center">
          {{ 'pages.translate.candidatosAuth.register.title' | translate }}
        </h4>
      </div>

      <div class="card-body">
        <!-- Seletor de login com redes sociais -->
        <div class="social-login text-center mt-3">
          <button class="btn btn-social facebook" (click)="loginWithSocial('facebook')">
            <i class="bi bi-facebook"></i> {{ 'pages.translate.candidatosAuth.register.social.facebook' | translate }}
          </button>
          <button class="btn btn-social google" (click)="loginWithSocial('google')">
            <i class="bi bi-google"></i> {{ 'pages.translate.candidatosAuth.register.social.google' | translate }}
          </button>
          <button class="btn btn-social github" (click)="loginWithSocial('github')">
            <i class="bi bi-github"></i> {{ 'pages.translate.candidatosAuth.register.social.github' | translate }}
          </button>
          <button class="btn btn-social linkedin" (click)="loginWithSocial('linkedin')">
            <i class="bi bi-linkedin"></i> {{ 'pages.translate.candidatosAuth.register.social.linkedin' | translate }}
          </button>
        </div>

        <h4 class="card-title text-center mt-4">
          {{ 'pages.translate.candidatosAuth.register.h4' | translate }}
        </h4>

        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
          <div class="form-group mb-3">
            <label for="nome">{{ 'pages.translate.candidatosAuth.register.form.fullName' | translate }}</label>
            <input
              type="text"
              class="form-control"
              id="nome"
              placeholder="{{ 'pages.translate.candidatosAuth.register.form.fullNamePlaceholder' | translate }}"
              formControlName="nome"
              required
            />
            <div *ngIf="registerForm.get('nome')?.touched && registerForm.get('nome')?.invalid"
              class="invalid-feedback">
              <div *ngIf="registerForm.get('nome')?.errors?.['required']">
                {{ 'pages.translate.candidatosAuth.register.form.nameRequired' | translate }}
              </div>
            </div>
          </div>

          <div class="form-group mb-3">
            <label for="cpf">{{ 'pages.translate.candidatosAuth.register.form.cpf' | translate }}</label>
            <input
              type="text"
              class="form-control"
              id="cpf"
              placeholder="{{ 'pages.translate.candidatosAuth.register.form.cpfPlaceholder' | translate }}"
              formControlName="cpf"
              mask="000.000.000-00"
              maxlength="14"
              required
            />
            <div *ngIf="registerForm.get('cpf')?.touched && registerForm.get('cpf')?.invalid"
              class="invalid-feedback">
              <div *ngIf="registerForm.get('cpf')?.errors?.['required']">
                {{ 'pages.translate.candidatosAuth.register.form.cpfRequired' | translate }}
              </div>
              <div *ngIf="registerForm.get('cpf')?.errors?.['pattern']">
                {{ 'pages.translate.candidatosAuth.register.form.cpfInvalid' | translate }}
              </div>
            </div>
          </div>

          <div class="form-group mb-3">
            <label for="email">{{ 'pages.translate.candidatosAuth.register.form.email' | translate }}</label>
            <input
              type="email"
              class="form-control"
              id="email"
              placeholder="{{ 'pages.translate.candidatosAuth.register.form.emailPlaceholder' | translate }}"
              formControlName="email"
              required
            />
            <div *ngIf="registerForm.get('email')?.touched && registerForm.get('email')?.invalid"
              class="invalid-feedback">
              <div *ngIf="registerForm.get('email')?.errors?.['required']">
                {{ 'pages.translate.candidatosAuth.register.form.emailRequired' | translate }}
              </div>
              <div *ngIf="registerForm.get('email')?.errors?.['email']">
                {{ 'pages.translate.candidatosAuth.register.form.emailInvalid' | translate }}
              </div>
            </div>
          </div>

          <div class="form-group mb-3">
            <label for="confirmEmail">{{ 'pages.translate.candidatosAuth.register.form.confirmEmail' | translate }}</label>
            <input
              type="email"
              class="form-control"
              id="confirmEmail"
              placeholder="{{ 'pages.translate.candidatosAuth.register.form.confirmEmailPlaceholder' | translate }}"
              formControlName="confirmEmail"
              required
            />
            <div *ngIf="registerForm.get('confirmEmail')?.touched && registerForm.get('confirmEmail')?.invalid"
              class="invalid-feedback">
              <div *ngIf="registerForm.get('confirmEmail')?.errors?.['required']">
                {{ 'pages.translate.candidatosAuth.register.form.confirmEmailRequired' | translate }}
              </div>
              <div *ngIf="registerForm.get('confirmEmail')?.errors?.['email']">
                {{ 'pages.translate.candidatosAuth.register.form.confirmEmailInvalid' | translate }}
              </div>
              <div *ngIf="registerForm.get('confirmEmail')?.errors?.['emailMatch']">
                {{ 'pages.translate.candidatosAuth.register.form.confirmEmailMismatch' | translate }}
              </div>
            </div>
          </div>

          <div class="form-group mb-3">
            <label for="senha">
              {{ 'pages.translate.candidatosAuth.register.form.password' | translate }}
              <i class="fa" [ngClass]="showPassword ? 'fa-eye-slash' : 'fa-eye'" (click)="togglePasswordVisibility()"></i>
            </label>
            <input
              [type]="showPassword ? 'text' : 'password'"
              class="form-control"
              id="senha"
              placeholder="{{ 'pages.translate.candidatosAuth.register.form.passwordPlaceholder' | translate }}"
              formControlName="senha"
              required
            />
            <div *ngIf="registerForm.get('senha')?.touched && registerForm.get('senha')?.invalid"
              class="invalid-feedback">
              <div *ngIf="registerForm.get('senha')?.errors?.['required']">
                {{ 'pages.translate.candidatosAuth.register.form.passwordRequired' | translate }}
              </div>
              <div *ngIf="registerForm.get('senha')?.errors?.['minlength']">
                {{ 'pages.translate.candidatosAuth.register.form.passwordMinLength' | translate }}
              </div>
              <div *ngIf="registerForm.get('senha')?.errors?.['pattern']">
                {{ 'pages.translate.candidatosAuth.register.form.passwordPattern' | translate }}
              </div>
            </div>
          </div>

          <div class="form-group mb-3">
            <label for="confirmSenha">
              {{ 'pages.translate.candidatosAuth.register.form.confirmPassword' | translate }}
              <i class="fa" [ngClass]="showConfirmPassword ? 'fa-eye-slash' : 'fa-eye'" (click)="toggleConfirmPasswordVisibility()"></i>
            </label>
            <input
              [type]="showConfirmPassword ? 'text' : 'password'"
              class="form-control"
              id="confirmSenha"
              placeholder="{{ 'pages.translate.candidatosAuth.register.form.confirmPasswordPlaceholder' | translate }}"
              formControlName="confirmSenha"
              required
            />
            <div *ngIf="registerForm.get('confirmSenha')?.touched && registerForm.get('confirmSenha')?.invalid"
              class="invalid-feedback">
              <div *ngIf="registerForm.get('confirmSenha')?.errors?.['required']">
                {{ 'pages.translate.candidatosAuth.register.form.confirmPasswordRequired' | translate }}
              </div>
              <div *ngIf="registerForm.get('confirmSenha')?.errors?.['passwordMatch']">
                {{ 'pages.translate.candidatosAuth.register.form.confirmPasswordMismatch' | translate }}
              </div>
            </div>
          </div>

          <button type="submit" class="btn btn-primary w-100 mt-3">
            {{ 'pages.translate.candidatosAuth.button.register' | translate }}
          </button>
        </form>

        <div class="text-center mt-3">
          <button *ngIf="registerUserType === 'register'" class="btn btn-link" (click)="toggleForm('login')">
            {{ 'pages.translate.candidatosAuth.links.login' | translate }}
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<app-footer></app-footer>
