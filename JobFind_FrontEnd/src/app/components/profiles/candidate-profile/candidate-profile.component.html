<app-nav-menu></app-nav-menu>

<div class="container profile-container">
  <div class="card profile-card">
    <div class="card-header">
      <h2 class="card-title">{{ getCurrentStepTitle() }}</h2>
    </div>
    <div class="card-body">
      <form [formGroup]="candidateForm" (ngSubmit)="onSubmit()">
        <!-- Etapa 1: Dados Pessoais -->
        <div *ngIf="currentStep === 1">
          <div class="form-row">
            <!-- Foto de Perfil -->
            <div class="form-group col-md-6">
              <div class="profile-photo-preview" (click)="fileInput.click()">
                <input #fileInput type="file" accept="image/*" (change)="onFileChange($event)" style="display: none;" />
                <div class="photo-placeholder">
                  <span *ngIf="!profilePhotoPreview">{{ 'Add Photo' | translate }}</span>
                  <img *ngIf="profilePhotoPreview" [src]="profilePhotoPreview" alt="Profile Photo Preview" />
                </div>
              </div>
            </div>

            <!-- Nome Completo -->
            <div class="form-group col-md-6">
              <label class="required">{{ 'pages.translate.candidate.fullName' | translate }}</label>
              <input type="text" class="form-control" formControlName="fullName"
                placeholder="{{ 'pages.translate.candidate.fullNamePlaceholder' | translate }}" />
            </div>
          </div>

          <div class="form-row">
            <!-- CPF -->
            <div class="form-group col-md-6">
              <label class="required small-label">{{ 'pages.translate.candidate.cpf' | translate }}</label>
              <input type="text" class="form-control" formControlName="cpf"
                placeholder="{{ 'pages.translate.candidate.cpfPlaceholder' | translate }}" />
            </div>

            <!-- RG -->
            <div class="form-group col-md-6">
              <label class="required small-label">{{ 'pages.translate.candidate.rg' | translate }}</label>
              <input type="text" class="form-control" formControlName="rg"
                placeholder="{{ 'pages.translate.candidate.rgPlaceholder' | translate }}" />
            </div>
          </div>

          <div class="form-row">
            <!-- Órgão Emissor -->
            <div class="form-group col-md-6">
              <label class="small-label">{{ 'pages.translate.candidate.issuingAgency' | translate }}</label>
              <input type="text" class="form-control" formControlName="issuingAgency"
                placeholder="{{ 'pages.translate.candidate.issuingAgencyPlaceholder' | translate }}" />
            </div>

            <!-- Data de Emissão -->
            <div class="form-group col-md-6">
              <label class="small-label">{{ 'pages.translate.candidate.issuingDate' | translate }}</label>
              <input type="date" class="form-control" formControlName="issuingDate" />
            </div>
          </div>

          <div class="form-row">
            <!-- E-mail -->
            <div class="form-group col-md-6">
              <label class="required small-label">{{ 'pages.translate.candidate.email' | translate }}</label>
              <input type="email" class="form-control" formControlName="email"
                placeholder="{{ 'pages.translate.candidate.emailPlaceholder' | translate }}" />
            </div>

            <!-- Confirmação de E-mail -->
            <div class="form-group col-md-6">
              <label class="required small-label">{{ 'pages.translate.candidate.confirmEmail' | translate }}</label>
              <input type="email" class="form-control" formControlName="confirmEmail"
                placeholder="{{ 'pages.translate.candidate.confirmEmailPlaceholder' | translate }}" />
            </div>
          </div>

          <div class="form-row">
            <!-- Telefone -->
            <div class="form-group col-md-6">
              <label class="small-label">{{ 'pages.translate.candidate.phone' | translate }}</label>
              <input type="text" class="form-control" formControlName="phone"
                placeholder="{{ 'pages.translate.candidate.phonePlaceholder' | translate }}" />
            </div>

            <!-- Confirmação de Telefone -->
            <div class="form-group col-md-6">
              <label class="small-label">{{ 'pages.translate.candidate.confirmPhone' | translate }}</label>
              <input type="text" class="form-control" formControlName="confirmPhone"
                placeholder="{{ 'pages.translate.candidate.confirmPhonePlaceholder' | translate }}" />
            </div>
          </div>

          <div class="form-row">
            <!-- Endereço -->
            <div class="form-group col-md-6">
              <label class="small-label">{{ 'pages.translate.candidate.address' | translate }}</label>
              <input type="text" class="form-control" formControlName="address"
                placeholder="{{ 'pages.translate.candidate.addressPlaceholder' | translate }}" />
            </div>

            <!-- Número -->
            <div class="form-group col-md-3">
              <label class="small-label">{{ 'pages.translate.candidate.number' | translate }}</label>
              <input type="text" class="form-control" formControlName="number"
                placeholder="{{ 'pages.translate.candidate.numberPlaceholder' | translate }}" />
            </div>

            <!-- Complemento -->
            <div class="form-group col-md-3">
              <label class="small-label">{{ 'pages.translate.candidate.complement' | translate }}</label>
              <input type="text" class="form-control" formControlName="complement"
                placeholder="{{ 'pages.translate.candidate.complementPlaceholder' | translate }}" />
            </div>
          </div>

          <div class="form-row">
            <!-- CEP -->
            <div class="form-group col-md-6">
              <label class="small-label">{{ 'pages.translate.candidate.zipCode' | translate }}</label>
              <input type="text" class="form-control" formControlName="zipCode"
                placeholder="{{ 'pages.translate.candidate.zipCodePlaceholder' | translate }}" />
            </div>

            <!-- Cidade -->
            <div class="form-group col-md-6">
              <label class="small-label">{{ 'pages.translate.candidate.city' | translate }}</label>
              <input type="text" class="form-control" formControlName="city"
                placeholder="{{ 'pages.translate.candidate.cityPlaceholder' | translate }}" />
            </div>
          </div>

          <div class="form-row">
            <!-- Estado -->
            <div class="form-group col-md-6">
              <label class="small-label">{{ 'pages.translate.candidate.state' | translate }}</label>
              <input type="text" class="form-control" formControlName="state"
                placeholder="{{ 'pages.translate.candidate.statePlaceholder' | translate }}" />
            </div>

            <!-- País -->
            <div class="form-group col-md-6">
              <label class="small-label">{{ 'pages.translate.candidate.country' | translate }}</label>
              <input type="text" class="form-control" formControlName="country"
                placeholder="{{ 'pages.translate.candidate.countryPlaceholder' | translate }}" />
            </div>
          </div>
        </div>

        <!-- Etapa 2: Experiência Profissional -->
        <div *ngIf="currentStep === 2">
          <h2>{{ 'pages.translate.candidate.professionalData' | translate }}</h2>
          <div formArrayName="professionalExperiences">
            <div *ngFor="let experience of professionalExperiences.controls; let i = index" [formGroupName]="i"
              class="experience-group">
              <div class="form-row">
                <!-- Nome da Empresa -->
                <div class="form-group col-md-6">
                  <label class="small-label">{{ 'pages.translate.candidate.companyName' | translate }}</label>
                  <input type="text" class="form-control" formControlName="companyName"
                    placeholder="{{ 'pages.translate.candidate.companyNamePlaceholder' | translate }}" />
                </div>

                <!-- Cargo -->
                <div class="form-group col-md-6">
                  <label class="small-label">{{ 'pages.translate.candidate.position' | translate }}</label>
                  <input type="text" class="form-control" formControlName="position"
                    placeholder="{{ 'pages.translate.candidate.positionPlaceholder' | translate }}" />
                </div>
              </div>

              <div class="form-row">
                <!-- Data de Início -->
                <div class="form-group col-md-6">
                  <label class="small-label">{{ 'pages.translate.candidate.startDate' | translate }}</label>
                  <input type="date" class="form-control" formControlName="startDate" />
                </div>

                <!-- Data de Término -->
                <div class="form-group col-md-6">
                  <label class="small-label">{{ 'pages.translate.candidate.endDate' | translate }}</label>
                  <input type="date" class="form-control" formControlName="endDate" />
                </div>
              </div>

              <!-- Responsabilidades -->
              <div class="form-row">
                <div class="form-group col-md-12">
                  <label class="small-label">{{ 'pages.translate.candidate.responsibilities' | translate }}</label>
                  <textarea class="form-control" formControlName="responsibilities"
                    placeholder="{{ 'pages.translate.candidate.responsibilitiesPlaceholder' | translate }}"
                    rows="3"></textarea>
                </div>
              </div>

              <button type="button" class="btn btn-danger" (click)="removeProfessionalExperience(i)">{{
                'pages.translate.candidate.removeExperience' | translate }}</button>
            </div>

            <button type="button" class="btn btn-primary" (click)="addProfessionalExperience()">{{
              'pages.translate.candidate.addExperience' | translate }}</button>
          </div>
        </div>

        <!-- Etapa 3: Formação Acadêmica -->
        <div *ngIf="currentStep === 3">
          <h2>{{ 'pages.translate.candidate.academicData' | translate }}</h2>
          <div formArrayName="academicQualifications">
            <div *ngFor="let qualification of academicQualifications.controls; let i = index" [formGroupName]="i"
              class="qualification-group">
              <div class="form-row">
                <!-- Nome da Instituição -->
                <div class="form-group col-md-6">
                  <label class="small-label">{{ 'pages.translate.candidate.institutionName' | translate }}</label>
                  <input type="text" class="form-control" formControlName="institutionName"
                    placeholder="{{ 'pages.translate.candidate.institutionNamePlaceholder' | translate }}" />
                </div>

                <!-- Curso -->
                <div class="form-group col-md-6">
                  <label class="small-label">{{ 'pages.translate.candidate.course' | translate }}</label>
                  <input type="text" class="form-control" formControlName="course"
                    placeholder="{{ 'pages.translate.candidate.coursePlaceholder' | translate }}" />
                </div>
              </div>

              <div class="form-row">
                <!-- Data de Início -->
                <div class="form-group col-md-6">
                  <label class="small-label">{{ 'pages.translate.candidate.startDate' | translate }}</label>
                  <input type="date" class="form-control" formControlName="startDate" />
                </div>

                <!-- Data de Término -->
                <div class="form-group col-md-6">
                  <label class="small-label">{{ 'pages.translate.candidate.endDate' | translate }}</label>
                  <input type="date" class="form-control" formControlName="endDate" />
                </div>
              </div>

              <button type="button" class="btn btn-danger" (click)="removeAcademicQualification(i)">{{
                'pages.translate.candidate.removeQualification' | translate }}</button>
            </div>

            <button type="button" class="btn btn-primary" (click)="addAcademicQualification()">{{
              'pages.translate.candidate.addQualification' | translate }}</button>
          </div>
        </div>

        <!-- Etapa 4 - Dados complementares -->
        <div *ngIf="currentStep === 4">
          <h2>{{ 'pages.translate.candidate.additionalData' | translate }}</h2>

          <!-- Pessoa com deficiência? -->
          <div class="form-group">
            <label>{{ 'pages.translate.candidate.hasDisability' | translate }}</label>
            <div class="btn-group btn-toggle">
              <button type="button" class="btn btn-default" [ngClass]="{'active': !hasDisability}"
                (click)="setDisability(false)">
                {{ 'pages.translate.candidate.no' | translate }}
              </button>
              <button type="button" class="btn btn-default" [ngClass]="{'active': hasDisability}"
                (click)="setDisability(true)">
                {{ 'pages.translate.candidate.yes' | translate }}
              </button>
            </div>
          </div><br>

          <!-- Exibe campos adicionais se "Sim" for selecionado -->
          <div *ngIf="hasDisability">
            <label for="disabilityType">{{ 'pages.translate.candidate.selectDisabilityType' | translate }}</label>
            <select id="disabilityType" formControlName="disabilityType" class="form-control">
              <option *ngFor="let type of disabilityTypes" [value]="type.key">
                {{ type.label }}
              </option>
            </select> <br>

            <label for="cid">{{ 'pages.translate.candidate.cid' | translate }}</label>
            <input id="cid" type="text" formControlName="cid" class="form-control"> <br>

            <label for="medicalReport">{{ 'pages.translate.candidate.medicalReport' | translate }}</label>
            <input id="medicalReport" type="file" formControlName="medicalReport" class="form-control">
          </div>
        </div>

        <!-- Navegação entre etapas -->
        <div class="button-container">
          <button type="button" *ngIf="currentStep > 1" (click)="prevStep()" class="btn btn-secondary">
            {{ 'pages.translate.candidate.previous' | translate }}
          </button>
          <button type="button" *ngIf="currentStep < 4" (click)="nextStep()" class="btn btn-primary">
            {{ 'pages.translate.candidate.next' | translate }}
          </button>
          <button type="submit" *ngIf="currentStep === 4" class="btn btn-success">
            {{ 'pages.translate.candidate.save' | translate }}
          </button>
        </div>

      </form>
    </div>
  </div>
</div>

<app-footer></app-footer>
